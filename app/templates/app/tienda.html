<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienda Ferrehouse</title>
    {% load static %}
    <link rel="icon" href="{% static 'app/img/LOGO-FERREHOUSE.svg' %}" type="image/x-icon">
    <link rel="stylesheet" href="{% static 'app/css/estilos.css' %}">
    <script src="https:/kit.fontawesome.com/4db3f232fb.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>

<!--barra de navegacion-->
<nav class="navbar navbar-light navbar-expand-lg fixed-top" style="background-image: linear-gradient(to right, #808080, #CCCCCC);">
  <div class="container">
      <a class="navbar-brand" href="{% url 'index' %}">
          <img src="{% static 'app/img/LOGO-FERREHOUSE.svg' %}" alt="" width="50" height="50"> FERREHOUSE
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
          <form class="d-flex">
              <input class="form-control me-2" type="search" placeholder="Buscar Producto" aria-label="Search">
              <button class="btn btn-dark" type="submit" style="margin-right: 10px;">Buscar</button>
              <a href="{% url 'login' %}" class="btn btn-dark">Ingresar</a>
          </form>
      </div>
      <a class="navbar-brand" href="{% url 'carrito' %}">
          <img src="{% static 'app/img/carrito-de-compras.png' %}" alt="" width="50" height="50" style="margin-left: 10px;">
      </a>
  </div>
</nav>
<br><br><br>

<!--SLIDE-->
<div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
  </div>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="{% static 'app/img/slide1.png' %}" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block">
        <h5>FERREHOUSE</h5>
        <a href="{% url 'nosotros' %}"><button class="btn btn-dark" type="submit">Nosotros</button></a>
      </div>
    </div>
    <div class="carousel-item">
      <img src="{% static 'app/img/slide2.png' %}" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block">
        <h5>OFERTAS EN HERRAMIENTAS MANUALES</h5>
        <p>Descubre las ofertas más destacadas en herramientas manuales en nuestro portal web de FERREHOUSE. Explora nuestra amplia selección y encuentra las herramientas que necesitas para tus proyectos.</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="{% static 'app/img/ferre4.png' %}" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block">
        <h5>OFERTAS EN HERRAMIENTAS ELECTRICAS</h5>
        <p>Descubre las ofertas más destacadas en herramientas electricas en nuestro portal web de FERREHOUSE. Explora nuestra amplia selección y encuentra las herramientas que necesitas para tus proyectos.</p>
      </div>
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<!--CONTENIDO DE LOS PRODUCTOS TIENDA-->
<style>
  .productos-container {
    display: flex;
    overflow-x: auto; /* Habilita la barra de desplazamiento horizontal si los productos no caben en la pantalla */
    gap: 20px; /* Espacio entre los productos */
  }
  
  .producto {
    border: 1px solid #ccc; /* Borde alrededor del producto */
    padding: 20px; /* Espacio interno dentro del producto */
    flex-shrink: 0; /* Evita que los productos se reduzcan para ajustarse al contenedor */
  }
  
  .contenedor {
    position: relative; /* Para alinear el contenido dentro del producto */
  }
  
  .desc {
    position: absolute;
    top: 0;
    right: 0;
    background-color: #ff0000; /* Color de fondo para el descuento */
    color: #fff;
    padding: 5px 10px;
  }
  
  .detalle-producto {
    margin-top: 10px; /* Espacio entre la imagen y el contenido del producto */
  }
  
  .marca {
    font-size: 16px;
  }
  
  .codigo {
    font-size: 14px;
  }
  
  .titulo {
    font-size: 18px;
    margin-top: 5px;
  }
  
  .precio {
    margin-top: 5px;
    font-size: 16px;
    color: #007bff; /* Color del precio */
  }
  
  .btn {
    margin-top: 10px; /* Espacio entre el botón y el precio */
  }
  
  .producto-imagen {
    width: 150px; /* Tamaño de la imagen */
    height: auto; /* La altura se ajustará automáticamente para mantener la proporción */
  }
  
</style>
{% load humanize %}
{% if productos %}
  <div id="contenido-producto" class="productos-container">
    {% for p in productos %}
    <div class="producto">
        <div class="contenedor">
            <div class="desc">-47%</div>
            {% if p.imagen %}
            <img src="{{ p.imagen.url }}" alt="Producto" class="producto-imagen">
            {% endif %}
            <div class="detalle-producto">
                <h5 class="marca">{{ p.marca.nombre|capfirst }}</h5>
                <p class="codigo">{{ p.codigo }}</p>
                <h3 class="titulo">{{ p.nombre }}</h3>
                <h4 class="precio">${{ p.precio|intcomma }}</h4>
            </div>
            <div class="text-center">
                <a href="{% url 'producto' p.id %}" class="btn btn-dark">Ver Producto</a>
                <br>
                <button class="btn btn-dark add-to-cart" data-id="{{ p.id }}">Agregar al Carrito</button>
            </div>
        </div>
    </div>
    {% endfor %}
  </div>
{% else %}
  <p>No hay productos disponibles.</p>
{% endif %}



<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function() {
    $('.add-to-cart').click(function() {
        var productId = $(this).data('id');
        var cantidad = 1; // Puedes ajustar la cantidad según tus necesidades
        $.post("{% url 'agregar_al_carrito' %}", {
            producto_id: productId,
            cantidad: cantidad,
            csrfmiddlewaretoken: '{{ csrf_token }}'
        }).done(function(data) {
            if (data.status === 'ok') {
                alert(data.message);
            } else {
                alert('Hubo un error al agregar el producto al carrito.');
            }
        }).fail(function() {
            alert('Error en la solicitud.');
        });
    });
});
</script>

<br>

<!--FOOTER DE FERREHOUSE-->
<footer class="pie-pagina" style="background-image: linear-gradient(to right, #808080, #CCCCCC);"> 
  <div class="grupo-1">
    <div class="box">
      <figure>
        <a href="#">
          <img src="{% static 'app/img/LOGO-FERREHOUSE.svg' %}" alt="logo de FERREHOUSE">
        </a>
      </figure>
    </div>
    <div class="box">
      <h2>METODOS DE PAGO</h2>
      <img src="{% static 'app/img/wp-g.png' %}" alt="#" style="width: 200px;">
    </div>     
    <div class="box">
      <h2>FERREHOUSE</h2>
      <ul class="no-bullets">
          <li>
              <a href="{% url 'nosotros' %}" class="link-normal">Sobre Nosotros</a>
          </li>
          <li>
            <a href="{% url 'tienda' %}" class="link-normal">Tienda</a>
          </li>
          <li>
            <a href="{% url 'contacto' %}" class="link-normal">Contacto</a>
          </li>
      </ul>
  </div>      
    <div class="box">
      <h2>SIGUENOS EN NUESTRAS REDES</h2>
      <div class="red-social">
        <a href="#" class="fa fa-facebook"></a>
        <a href="#" class="fa fa-instagram"></a>
        <a href="#" class="fa fa-github"></a>
        <a href="#" class="fa fa-linkedin"></a>
      </div>
    </div>
  </div>
  <div class="grupo-2">
    <small>&copy; 2024 <b>FERREHOUSE</b> - Todos los Derechos Reservados</small>
  </div>
</footer>

<!--scripts-->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
</html>